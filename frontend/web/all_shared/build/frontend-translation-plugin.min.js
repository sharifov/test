var helpers=function(){var a=!1;function t(){setTimeout(function(){$(".alert-box").remove()},5e3)}function e(a,t){return $("<div>").attr({class:"alert-box",role:"alert"}).addClass("alert").addClass(void 0===t?"alert-info":t).text(a)}return{post:function(t,e){!1===a&&(a=!0,$.post(t,e,$.proxy(function(t){a=!1,this.showTooltip(t)},this),"json"))},showTooltip:function(a){if(0===$("#alert-tooltip").length){var t=$("<div>").attr({id:"alert-tooltip"}).addClass(0===a.length?"green":"red").append($("<span>").addClass("glyphicon").addClass(0===a.length?" glyphicon-ok":"glyphicon-remove"));$("body").append(t),setTimeout(function(){$("#alert-tooltip").remove()},500)}},showMessages:function(a,n){$(".alert-box").length?$(".alert-box").append(a):($(void 0===n?$("body").find(".container").eq(1):n).prepend(e(a)),t())},showErrorMessages:function(a,e){for(i in a){var n=0;if($messages=new Array,"object"==typeof a[i])for(j in a[i])$messages[n++]=a[i][j];else $messages[n++]=a[i];this.showErrorMessage($messages.join(" "),e+i)}t()},showErrorMessage:function(a,t){$(t).next().html(e(a,"alert-danger"))}}}();$(document).ready(function(){FrontendTranslation.init()});var FrontendTranslation={enabledTranslate:!1,dialogURL:"/translatemanager/language/dialog",params:"",dialog:function(a){this.params=a.data("params"),$("#translate-manager-div").dialog({modal:!0,title:lajax.t("Translation Language: {name}",{name:a.data("language_id")}),minWidth:500,minHeight:200,buttons:[{text:lajax.t("Save"),click:$.proxy(function(){var t=$("#transslate-manager-translation-form");$.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),dataType:"json",success:$.proxy(function(e){0===e.length?($("span[data-hash="+a.data("hash")+"]").html(lajax.t($.trim(t.find("textarea").val()),this.params)),$("#translate-manager-div").dialog("close")):helpers.showErrorMessages(e,"#languagetranslate-")},this)})},this)},{text:lajax.t("Close"),click:function(){$(this).dialog("close")}}],create:$.proxy(function(t){$(t.target).load(this.dialogURL,{hash:a.data("hash"),category:a.data("category"),language_id:a.data("language_id")},function(){$("#languagetranslate-translation").focus()})},this),close:function(){$("#translate-manager-div").dialog("destroy").html("")}})},changeSourceLanguage:function(){var a=$("#transslate-manager-change-source-form");$("#translate-manager-message").load(a.attr("action"),a.serialize())},addClick:function(){$("span.language-item.translatable").click($.proxy(function(a){if(this.enabledTranslate)return this.dialog($(a.currentTarget)),a.stopPropagation(),!1},this))},toggleTranslate:function(){var a=$(".language-item");a.toggleClass("translatable"),this.enabledTranslate=a.hasClass("translatable"),this.addClick()},init:function(){$("body").on("change","#translate-manager-language-source",$.proxy(function(){this.changeSourceLanguage()},this)),$("body").on("click","#toggle-translate",$.proxy(function(){this.toggleTranslate()},this)),void 0!==$("#toggle-translate").data("url")&&(this.dialogURL=$("#toggle-translate").data("url"))}};