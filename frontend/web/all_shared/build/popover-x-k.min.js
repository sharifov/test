!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","window","document"],t):"object"==typeof module&&"object"==typeof module.exports?t(require("jquery"),window,document):t(window.jQuery,window,document)}(function(t,o,e,i){"use strict";var r,n,s;t.fn.popoverXBsVersion||(t.fn.popoverXBsVersion=o.Modal&&o.Modal.VERSION||o.bootstrap&&o.bootstrap.Modal&&bootstrap.Modal.VERSION||"3.x.x"),r={NAMESPACE:".popoverX",modalOptions:["keyboard","focus","show"],kvLog:function(t){t="bootstrap-popover-x: "+t,o.console&&o.console.log?o.console.log(t):o.alert(t)},addCss:function(t,o){t.removeClass(o).addClass(o)},handler:function(t,o,e){var i=o+r.NAMESPACE;return t.off(i).on(i,e)},raise:function(t,o,e){var n=o+(e===i?".target":e)+r.NAMESPACE;return t.trigger(n)},isBs:function(o){var e=t.trim((t.fn.popoverXBsVersion||"")+"");return o=parseInt(o,10),e?o===parseInt(e.charAt(0),10):4===o},getDataAttr:function(t){return"data-"+(r.isBs(5)?"bs-":"")+t}},s=function(o,e){this.options=e,this.$element=t(o),this.$dialog=this.$element,this.init()},(n=function(o,e){this.options=e,this.$element=t(o),this.init()}).prototype={constructor:n,init:function(){var o,e,i=this,n=i.$element,s=i.options||{},a=n.attr("href"),p=function(t){r.kvLog("PopoverX initialization skipped! "+t)};if(i.href=a,n&&n.length)if(n.attr("data-toggle","popover-x"),s.target?(n.data("target",s.target),e=t(s.target)):e=t(n.data("target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),e.length){if(i.$dialog=e,e.attr(r.getDataAttr("backdrop"),"false"),r.addCss(e,"popover-x"),!e.data("popover-x")){var l=t.extend(!0,{remote:a&&!/#/.test(a)},e.data(),n.data(),s);l.$target=n,e.popoverX(l)}"string"==typeof(o=s.trigger)?(o=o.split(" "),t.each(o,function(t,o){i.listen(o)})):p("Invalid or improper configuration for PopoverX trigger.")}else p("PopoverX dialog element could not be found.");else p("PopoverX triggering button element could not be found.")},listen:function(t){var o,e,i=this.$element,n=this.$dialog,s=!1,a=this.href;"manual"!==t&&("click"!==t&&"keyup"!==t&&(s=!0),s?(o="hover"===t?"mouseenter":"focusin",e="hover"===t?"mouseleave":"focusout",r.handler(i,o,function(){r.raise(n,o).popoverX("show")}),r.handler(i,e,function(){r.raise(n,e).popoverX("hide")})):r.handler(i,t,function(o){"keyup"!==t?(a&&"click"===t&&o.preventDefault(),r.raise(n,t).popoverX("toggle"),r.handler(n,"hide",function(){i.focus()})):n&&27===o.which&&r.raise(n,t).popoverX("hide")}))},destroy:function(){this.$element.off(r.NAMESPACE),this.$dialog.modal("dispose").off(r.NAMESPACE)}},s.prototype={constructor:s,init:function(){var i=this,n=i.$element,s=i.options,a=s.$container,p=r.isBs(5);a&&a.length&&(i.$body=a),i.$body&&i.$body.length||(i.$body=t(e.body)),t.each(r.modalOptions,function(t,o){s[o]&&n.attr(r.getDataAttr(o),s[o])}),n.attr(r.getDataAttr("backdrop"),"false"),p&&!n.find(".modal-dialog").length&&(t(e.createElement("div")).addClass("modal-dialog").css({margin:0,"pointer-events":"all"}).insertAfter(n).append(n.contents()).appendTo(n),r.addCss(n.find(".arrow"),"popover-arrow")),r.addCss(n,"is-bs"+t.fn.popoverXBsVersion.charAt(0)),i.bodyPadding=i.$body.css("padding"),i.$target=i.options.$target,i.$marker=t(e.createElement("div")).addClass("popover-x-marker").insertAfter(n).hide(),n.find(".popover-footer").length&&r.addCss(n,"has-footer"),i.options.remote&&n.find(".popover-content").on("load",i.options.remote,function(){n.trigger("load.complete.popoverX")}),n.on("click.dismiss"+r.NAMESPACE,'[data-dismiss="popover-x"]',t.proxy(i.hide,i)),s.closePopoverOnBlur&&t(e).on("click",function(o){var e=t(o.target);e.closest('[data-toggle="popover-x"]').length||(e.closest(".popover-x").length?o.stopPropagation():t(".popover-x:visible").popoverX("hide"))});var l,f="hide.bs.modal.popoverX",h=t(".modal");h.length&&(l=h.find("[data-toggle='popover-x']")).length&&h.off(f).on(f,function(){l.each(function(){var o=t(this).data("target")||null,e=t(o);e.length&&e.is(":visible")&&e.popoverX("hide")})}),t(o).resize(function(){n.hasClass("kv-popover-active")&&(i.hide(),setTimeout(function(){i.show(!0)},50))})},getPlacement:function(){var t=this.getPosition(),i=this.options.placement,r=e.documentElement,n=e.body,s=r.clientWidth,a=r.clientHeight,p=Math.max(n.scrollTop||0,r.scrollTop),l="horizontal"===i,f=Math.max(n.scrollLeft||0,r.scrollLeft),h="vertical"===i,d=Math.max(0,t.left-f),c=Math.max(0,t.top-p),g="auto"===i||l||h,u=o.innerWidth||r||e.body.clientWidth;if(this.options.autoPlaceSmallScreen&&u<this.options.smallScreenWidth&&(g=!0),g)return d<s/3?c<a/3?l?"right right-top":"bottom bottom-left":c<2*a/3?h?c<=a/2?"bottom bottom-left":"top top-left":"right":l?"right right-bottom":"top top-left":d<2*s/3?c<a/3?l?d<=s/2?"right right-top":"left left-top":"bottom":c<2*a/3?l?d<=s/2?"right":"left":c<=a/2?"bottom":"top":l?d<=s/2?"right right-bottom":"left left-bottom":"top":c<a/3?l?"left left-top":"bottom bottom-left":c<2*a/3?h?c<=a/2?"bottom-right":"top-right":"left":l?"left left-bottom":"top top-left";switch(i){case"auto-top":return d<s/3?"top top-left":d<2*s/3?"top":"top top-right";case"auto-bottom":return d<s/3?"bottom bottom-left":d<2*s/3?"bottom":"bottom bottom-right";case"auto-left":return c<a/3?"left left-top":c<2*a/3?"left":"left left-bottom";case"auto-right":return c<a/3?"right right-top":c<2*a/3?"right":"right right-bottom";default:return i}},getPosition:function(){var o=this.$target,i=o[0].getBoundingClientRect(),r=this.$body,n=r.css("position");if(r.is(e.body)||"static"===n)return t.extend({},o.offset(),{width:o[0].offsetWidth||i.width,height:o[0].offsetHeight||i.height});if("relative"===n)return{top:o.offset().top-r.offset().top,left:o.offset().left-r.offset().left,width:o[0].offsetWidth||i.width,height:o[0].offsetHeight||i.height};var s=r[0].getBoundingClientRect();return{top:i.top-s.top+r.scrollTop(),left:i.left-s.left+r.scrollLeft(),width:i.width,height:i.height}},refreshPosition:function(){var t,o=this.$element,e=this.getPosition(),i=o[0].offsetWidth,n=o[0].offsetHeight,s=this.getPlacement();switch(s){case"bottom":t={top:e.top+e.height,left:e.left+e.width/2-i/2};break;case"bottom bottom-left":t={top:e.top+e.height,left:e.left};break;case"bottom bottom-right":t={top:e.top+e.height,left:e.left+e.width-i};break;case"top":t={top:e.top-n,left:e.left+e.width/2-i/2};break;case"top top-left":t={top:e.top-n,left:e.left};break;case"top top-right":t={top:e.top-n,left:e.left+e.width-i};break;case"left":t={top:e.top+e.height/2-n/2,left:e.left-i};break;case"left left-top":t={top:e.top,left:e.left-i};break;case"left left-bottom":t={top:e.top+e.height-n,left:e.left-i};break;case"right":t={top:e.top+e.height/2-n/2,left:e.left+e.width};break;case"right right-top":t={top:e.top,left:e.left+e.width};break;case"right right-bottom":t={top:e.top+e.height-n,left:e.left+e.width};break;default:r.kvLog("Invalid popover placement '"+s+"'.")}o.removeClass("bottom top left right bottom-left top-left bottom-right top-right left-bottom left-top right-bottom right-top").css(t).addClass(s+" in")},validateOpenPopovers:function(){var o=this.$element;this.options.closeOpenPopovers&&this.$body.find(".popover:visible").each(function(){var e=t(this);e.is(o)||e.popoverX("hide")})},hide:function(){var t=this.$element;this.$body.removeClass("popover-x-body"),t.removeClass("kv-popover-active"),t.modal("hide"),t.insertBefore(this.$marker)},show:function(t){var o=this.$element;o.addClass("kv-popover-active"),o.css(this.options.dialogCss).appendTo(this.$body),t||this.validateOpenPopovers(),r.addCss(this.$body,"popover-x-body"),o.modal("show"),this.$body.css({padding:this.bodyPadding}),o.css({padding:0}),this.refreshPosition()},toggle:function(){this.$element.is(":visible")?this.hide():this.show()},destroy:function(){this.$element.modal("dispose").off(r.NAMESPACE)}},t.fn.popoverButton=function(o){return this.each(function(){var e=t(this),i=e.data("popover-button"),r=t.extend({},t.fn.popoverButton.defaults,e.data(),"object"==typeof o&&o);i||e.data("popover-button",i=new n(this,r)),"string"==typeof o&&i[o]()})},t.fn.popoverX=function(o){return this.each(function(){var e=t(this),i=e.data("popover-x"),r=t.extend({},t.fn.popoverX.defaults,e.data(),"object"==typeof o&&o);r.$target||(i&&i.$target?r.$target=i.$target:r.$target=o.$target||t(o.target)),i||e.data("popover-x",i=new s(this,r)),"string"==typeof o?i[o]():r.show&&i.show(!0)})},t.fn.popoverButton.defaults={trigger:"click keyup"},t.fn.popoverX.defaults=t.extend(!0,{},{placement:"auto",dialogCss:{top:0,left:0,display:"block","z-index":1065},autoPlaceSmallScreen:!0,smallScreenWidth:640,closeOpenPopovers:!0,closePopoverOnBlur:!0,keyboard:!0,focus:!0}),t.fn.popoverButton.Constructor=n,t.fn.popoverX.Constructor=s,t(e).ready(function(){var o=t("[data-toggle='popover-x']");o.length&&o.popoverButton()})});